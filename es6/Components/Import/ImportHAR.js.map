{"version":3,"file":"ImportHAR.js","sources":["../../../src/Components/Import/ImportHAR.tsx"],"sourcesContent":["// @ts-nocheck\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { useDropzone } from 'react-dropzone';\n\nimport { useNetwork } from './../../state/network/Context';\nimport Styles from './ImportHAR.styles.scss';\nimport Button from './../Common/Button';\n\nconst DROP_FILE_CONFIG = {\n  accept: '.har',\n  multiple: false,\n};\n\nconst ImportHar = ({ showButton, className }) => {\n  const { actions } = useNetwork();\n  const { updateErrorMessage } = actions;\n\n  const prepareData = (newNetworkData) => (\n    actions.updateData({\n      entries: newNetworkData.log.entries,\n      pages: newNetworkData.log.pages,\n    })\n  );\n\n  const onDrop = (files) => {\n    const reader = new FileReader();\n    reader.onabort = () => updateErrorMessage({ title: 'file reading was aborted' });\n    reader.onerror = () => updateErrorMessage({ title: 'file reading has failed' });\n    reader.onload = () => {\n      try {\n        const data = JSON.parse(reader.result);\n        prepareData(data);\n      } catch (error) {\n        updateErrorMessage({ title: 'Error while parsing HAR file' });\n      }\n    };\n    reader.readAsText(files[0]);\n  };\n\n  const { getRootProps, getInputProps } = useDropzone({\n    ...DROP_FILE_CONFIG,\n    onDrop,\n  });\n\n  return (\n    <div {...getRootProps()}>\n      <input {...getInputProps()} />\n      {showButton ? (\n        <Button\n          category=\"default\"\n          className={className}\n          material\n          raised\n          size=\"sm\"\n        >\n          Import HAR\n        </Button>\n      ) : (\n        <p className={Styles['drag-drop']}>Drag and drop HAR file here, or click to select file</p>\n      )}\n    </div>\n  );\n};\n\nImportHar.propTypes = {\n  className: PropTypes.string,\n  showButton: PropTypes.bool,\n};\n\nImportHar.defaultProps = {\n  className: null,\n  showButton: true,\n};\n\nexport default ImportHar;\n"],"names":["DROP_FILE_CONFIG","accept","multiple","ImportHar","showButton","className","useNetwork","actions","updateErrorMessage","prepareData","newNetworkData","updateData","entries","log","pages","onDrop","files","reader","FileReader","onabort","title","onerror","onload","data","JSON","parse","result","error","readAsText","useDropzone","getRootProps","getInputProps","Styles","propTypes","PropTypes","string","bool","defaultProps"],"mappings":"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"}